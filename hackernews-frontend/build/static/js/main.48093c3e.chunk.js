(this["webpackJsonphackernews-frontend"]=this["webpackJsonphackernews-frontend"]||[]).push([[0],{28:function(e,t,n){e.exports=n(58)},34:function(e,t,n){},40:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),c=n.n(o),l=(n(33),n(11),n(14),n(34),n(6)),s=n.n(l),i=n(10),m=n(4),u=n(3),d=n(25),b=n(7),g=(n(40),n(5)),p=n.n(g),f="https://besthackernews.herokuapp.com/api/v1/",h=function(e){return e?p.a.get(f+"get?timespan="+e):p.a.get(f+"get")},v=function(e){var t={headers:{Authorization:"bearer ".concat(e)}};return p.a.get(f+"hidden",t)},E=function(e,t){var n={headers:{Authorization:"bearer ".concat(t)}};return p.a.post(f+"hidden",{hidden:e},n)},w={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("https://besthackernews.herokuapp.com/api/v1/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=n(26),k=n.n(N),y=n(8),j=function(e){var t,n=e.story,a=e.addHidden,o=n.url?"https://www.google.com/s2/favicons?domain="+new URL(n.url).hostname:"https://www.google.com/s2/favicons?domain=news.ycombinator.com";return r.a.createElement("div",{className:"bg-light text-dark rounded border-bottom border-right d-flex p-md-3 p-sm-2 px-2 mx-md-3 my-md-1"},r.a.createElement("div",null,r.a.createElement("img",{src:o,alt:"favicon"})," "),r.a.createElement("div",{className:"px-3"},r.a.createElement("a",{href:n.url},n.title),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement(u.a,{icon:y.d})," ",n.by,"\xa0\xa0",r.a.createElement(u.a,{icon:y.a})," ",k()(n.time).fromNow())),r.a.createElement("div",{className:"btn-group btn-group-sm d-flex align-items-center",role:"group"},r.a.createElement("a",{href:"#",className:"btn btn-outline-secondary"},r.a.createElement(u.a,{icon:y.c}),"\xa0",n.score),r.a.createElement("a",{href:(t=n.id,"https://news.ycombinator.com/item?id=".concat(t)),className:"btn btn-outline-secondary"},r.a.createElement(u.a,{icon:y.b}),"\xa0",n.descendants),r.a.createElement("a",{href:"#",className:"btn btn-outline-secondary",onClick:function(){return a(n.id)}},r.a.createElement(u.a,{icon:b.b}))))},O=function(e){var t=e.stories,n=e.hidden,a=e.addHidden;return(n.length?t.filter((function(e){return!n.includes(e.id)})):t).map((function(e){return r.a.createElement(j,{key:e.id,story:e,addHidden:a})}))},x=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)("Day"),l=Object(m.a)(c,2),g=l[0],p=l[1],f=Object(a.useState)([]),N=Object(m.a)(f,2),k=N[0],y=N[1],j=Object(a.useState)(!1),x=Object(m.a)(j,2),S=x[0],C=x[1],H=Object(a.useState)(""),z=Object(m.a)(H,2),D=z[0],W=z[1],A=Object(a.useState)(""),L=Object(m.a)(A,2),U=L[0],I=L[1],M=Object(a.useState)(!1),T=Object(m.a)(M,2),B=T[0],J=T[1],P=Object(a.useState)(null),Y=Object(m.a)(P,2),F=Y[0],R=Y[1];Object(a.useEffect)((function(){console.log("fetching stories..."),C(!0),h(g).then((function(e){console.log("...got them"),o(e.data),C(!1)})).catch((function(e){console.log("didn't get them: ",e),C(!1)}))}),[g]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loginToken");e&&R(e)}),[]),Object(a.useEffect)((function(){F&&(console.log("fetching hidden..."),v(F).then((function(e){console.log("...got hidden"),y(e.data)})).catch((function(e){console.log("whoopsie:",e),y(null)})))}),[F]);var $=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,w.login({goto:"news",acct:D,pw:U});case 4:(n=e.sent).token?R(n.token):R(null),J(!1),W(""),I(""),window.localStorage.setItem("loginToken",n.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),J(!0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-light",onClick:function(){return p("Day")}},"Day"),r.a.createElement("button",{className:"btn btn-light",onClick:function(){return p("Week")}},"Week"),r.a.createElement("button",{className:"btn btn-light",onClick:function(){return p("Month")}},"Month"),r.a.createElement("button",{className:"btn btn-light",onClick:function(){return p("Year")}},"Year"),r.a.createElement("button",{className:"btn btn-light",onClick:function(){return p("All")}},"All"))};return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar fixed-top navbar-expand navbar-dark bg-dark d-flex justify-content-start align-items-center"},r.a.createElement("div",{className:"navbar-brand h1 m-0 mr-3"},r.a.createElement(u.a,{icon:d.a,size:"lg",className:"mr-2"}),"Top Hacker News Stories"),r.a.createElement("div",{className:"btn-group d-md-none"},r.a.createElement("button",{className:"btn btn-sm btn-light",type:"button","data-toggle":"dropdown"},g),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("div",{className:"btn-group btn-group-sm"},q()))),r.a.createElement("div",{className:"btn-group btn-group-sm d-none d-md-block"},q()),r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:"btn","data-toggle":"dropdown",href:"#"},F?r.a.createElement(u.a,{icon:b.c,size:"lg",className:"m-auto",inverse:!0}):r.a.createElement(u.a,{icon:b.a,size:"lg",className:"m-auto",inverse:!0})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right",id:"loginDropdownMenu"},F?r.a.createElement("div",{className:"m-3"},"Logged in"):r.a.createElement("form",{className:"px-2",onSubmit:$},r.a.createElement("div",{className:"mb-3 form-group"},"Username",r.a.createElement("input",{type:"text",value:D,name:"Username",onChange:function(e){var t=e.target;return W(t.value)}})),r.a.createElement("div",{className:"mb-3 form-group"},"Password",r.a.createElement("input",{type:"password",value:U,name:"Password",onChange:function(e){var t=e.target;return I(t.value)}})),r.a.createElement("button",{type:"submit",className:"btn-dark btn-md mb-2 form-group"},"Login"),B?r.a.createElement("div",{className:"mb-3 text-danger"},"Wrong username/password"):null,r.a.createElement("div",{className:"small form-group"},r.a.createElement("small",null,"Use your Hacker News login or"," ",r.a.createElement("a",{href:"https://news.ycombinator.com/login"},"register there"))))))),r.a.createElement("main",null,S?r.a.createElement("div",{className:"alert alert-primary align-middle m-3",role:"alert"},"Loading... ",r.a.createElement("div",{className:"spinner-border",role:"status"})):r.a.createElement(O,{stories:n,hidden:k,addHidden:function(e){console.log("hiding: ",e,":",k);var t=k.concat(e);y(t),F&&E(e,F)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.48093c3e.chunk.js.map