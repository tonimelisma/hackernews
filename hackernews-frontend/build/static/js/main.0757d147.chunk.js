(this["webpackJsonphackernews-frontend"]=this["webpackJsonphackernews-frontend"]||[]).push([[0],{34:function(e,t,n){},40:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),s=n(24),r=n.n(s),o=(n(32),n(14),n(34),n(7)),i=n.n(o),d=n(12),l=n(5),b=n(4),u=n(26),j=n(8),m=(n(40),n(6)),h=n.n(m),g="https://besthackernews.herokuapp.com/api/v1/",p={getAll:function(e){return e?h.a.get(g+"get?timespan=".concat(e)):h.a.get(g+"get")},getHidden:function(e){var t={headers:{Authorization:"bearer ".concat(e)}};return h.a.get(g+"hidden",t)},addHidden:function(e,t){var n={headers:{Authorization:"bearer ".concat(t)}};return h.a.post(g+"hidden",{hidden:e},n)}},O={login:function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("https://besthackernews.herokuapp.com/api/v1/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=n(25),x=n.n(f),v=n(10),w=function(e){var t,n=e.story,a=e.addHidden,s=n.url?"https://www.google.com/s2/favicons?domain="+new URL(n.url).hostname:"https://www.google.com/s2/favicons?domain=news.ycombinator.com";return Object(c.jsxs)("div",{className:"bg-light text-dark rounded border-bottom border-right d-flex p-md-3 p-sm-2 px-2 mx-md-3 my-md-1",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:s,alt:"favicon"})," "]})," ",Object(c.jsxs)("div",{className:"px-3",children:[Object(c.jsxs)("a",{href:n.url,children:[" ",n.title," "]})," ",Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:[Object(c.jsx)(b.a,{icon:v.d})," ",n.by,"\xa0\xa0",Object(c.jsx)(b.a,{icon:v.a})," ",x()(n.time).fromNow()]})," "]})," ",Object(c.jsxs)("div",{className:"btn-group btn-group-sm d-flex align-items-center",role:"group",children:[Object(c.jsxs)("a",{href:"#",role:"button",className:"btn btn-outline-secondary",children:[Object(c.jsx)(b.a,{icon:v.c}),"\xa0",n.score]})," ",Object(c.jsxs)("a",{href:(t=n.id,"https://news.ycombinator.com/item?id=".concat(t)),className:"btn btn-outline-secondary",children:[Object(c.jsx)(b.a,{icon:v.b}),"\xa0",n.descendants]})," ",Object(c.jsxs)("a",{href:"#",role:"button",className:"btn btn-outline-secondary",onClick:function(){return a(n.id)},children:[Object(c.jsx)(b.a,{icon:j.b})," "]})," "]})," "]})},N=function(e){var t=e.stories,n=e.hidden,a=e.addHidden;return(n.length?t.filter((function(e){return!n.includes(e.id)})):t).map((function(e){return Object(c.jsx)(w,{story:e,addHidden:a},e.id)}))},k=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)("Day"),o=Object(l.a)(r,2),m=o[0],h=o[1],g=Object(a.useState)([]),f=Object(l.a)(g,2),x=f[0],v=f[1],w=Object(a.useState)(!1),k=Object(l.a)(w,2),y=k[0],S=k[1],H=Object(a.useState)(""),C=Object(l.a)(H,2),A=C[0],z=C[1],D=Object(a.useState)(""),W=Object(l.a)(D,2),E=W[0],L=W[1],U=Object(a.useState)(!1),I=Object(l.a)(U,2),M=I[0],T=I[1],B=Object(a.useState)(null),J=Object(l.a)(B,2),P=J[0],Y=J[1];Object(a.useEffect)((function(){console.log("fetching stories..."),S(!0),p.getAll(m).then((function(e){console.log("...got them"),s(e.data),S(!1)})).catch((function(e){console.log("didn't get them: ",e),S(!1)}))}),[m]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loginToken");e&&Y(e)}),[]),Object(a.useEffect)((function(){P&&(console.log("fetching hidden..."),p.getHidden(P).then((function(e){console.log("...got hidden"),v(e.data)})).catch((function(e){console.log("whoopsie:",e),v(null)})))}),[P]);var F=function(){var e=Object(d.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.login({goto:"news",acct:A,pw:E});case 4:(n=e.sent).token?Y(n.token):Y(null),T(!1),z(""),L(""),window.localStorage.setItem("loginToken",n.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),T(!0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Day")},children:"Day"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Week")},children:"Week"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Month")},children:"Month"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Year")},children:"Year"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("All")},children:"All"})]})};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{className:"navbar fixed-top navbar-expand navbar-dark bg-dark d-flex justify-content-start align-items-center",children:[Object(c.jsxs)("div",{className:"navbar-brand h1 m-0 mr-3",children:[Object(c.jsx)(b.a,{icon:u.a,size:"lg",className:"mr-2"}),"Top Hacker News Stories"]}),Object(c.jsxs)("div",{className:"btn-group d-md-none",children:[Object(c.jsx)("button",{className:"btn btn-sm btn-light",type:"button","data-toggle":"dropdown",children:m}),Object(c.jsx)("div",{className:"dropdown-menu dropdown-menu-right",children:Object(c.jsx)("div",{className:"btn-group btn-group-sm",children:R()})})]}),Object(c.jsx)("div",{className:"btn-group btn-group-sm d-none d-md-block",children:R()}),Object(c.jsxs)("div",{className:"btn-group",children:[Object(c.jsx)("a",{className:"btn","data-toggle":"dropdown",href:"#",children:P?Object(c.jsx)(b.a,{icon:j.c,size:"lg",className:"m-auto",inverse:!0}):Object(c.jsx)(b.a,{icon:j.a,size:"lg",className:"m-auto",inverse:!0})}),Object(c.jsx)("div",{className:"dropdown-menu dropdown-menu-right",id:"loginDropdownMenu",children:P?Object(c.jsx)("div",{className:"m-3",children:"Logged in"}):Object(c.jsxs)("form",{className:"px-2",onSubmit:F,children:[Object(c.jsxs)("div",{className:"mb-3 form-group",children:["Username",Object(c.jsx)("input",{type:"text",value:A,name:"Username",onChange:function(e){var t=e.target;return z(t.value)}})]}),Object(c.jsxs)("div",{className:"mb-3 form-group",children:["Password",Object(c.jsx)("input",{type:"password",value:E,name:"Password",onChange:function(e){var t=e.target;return L(t.value)}})]}),Object(c.jsx)("button",{type:"submit",className:"btn-dark btn-md mb-2 form-group",children:"Login"}),M?Object(c.jsx)("div",{className:"mb-3 text-danger",children:"Wrong username/password"}):null,Object(c.jsx)("div",{className:"small form-group",children:Object(c.jsxs)("small",{children:["Use your Hacker News login or"," ",Object(c.jsx)("a",{href:"https://news.ycombinator.com/login",children:"register there"})]})})]})})]})]}),Object(c.jsx)("main",{children:y?Object(c.jsxs)("div",{className:"alert alert-primary align-middle m-3",role:"alert",children:["Loading... ",Object(c.jsx)("div",{className:"spinner-border",role:"status"})]}):Object(c.jsx)(N,{stories:n,hidden:x,addHidden:function(e){console.log("hiding: ",e,":",x);var t=x.concat(e);v(t),P&&p.addHidden(e,P)}})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(c.jsx)(k,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.0757d147.chunk.js.map