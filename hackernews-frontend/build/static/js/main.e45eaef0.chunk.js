(this["webpackJsonphackernews-frontend"]=this["webpackJsonphackernews-frontend"]||[]).push([[0],{35:function(e,t,n){},41:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(2),s=n(25),r=n.n(s),o=(n(34),n(13),n(15),n(35),n(7)),i=n.n(o),l=n(11),d=n(5),b=n(4),u=n(27),j=n(8),m=(n(41),n(6)),h=n.n(m),g="https://besthackernews.herokuapp.com/api/v1/",p=function(e){return e?h.a.get(g+"get?timespan="+e):h.a.get(g+"get")},O=function(e){var t={headers:{Authorization:"bearer ".concat(e)}};return h.a.get(g+"hidden",t)},f=function(e,t){var n={headers:{Authorization:"bearer ".concat(t)}};return h.a.post(g+"hidden",{hidden:e},n)},x={login:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("https://besthackernews.herokuapp.com/api/v1/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=n(26),w=n.n(v),N=n(9),k=function(e){var t,n=e.story,a=e.addHidden,s=n.url?"https://www.google.com/s2/favicons?domain="+new URL(n.url).hostname:"https://www.google.com/s2/favicons?domain=news.ycombinator.com";return Object(c.jsxs)("div",{className:"bg-light text-dark rounded border-bottom border-right d-flex p-md-3 p-sm-2 px-2 mx-md-3 my-md-1",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("img",{src:s,alt:"favicon"})," "]}),Object(c.jsxs)("div",{className:"px-3",children:[Object(c.jsx)("a",{href:n.url,children:n.title}),Object(c.jsx)("br",{}),Object(c.jsxs)("small",{children:[Object(c.jsx)(b.a,{icon:N.d})," ",n.by,"\xa0\xa0",Object(c.jsx)(b.a,{icon:N.a})," ",w()(n.time).fromNow()]})]}),Object(c.jsxs)("div",{className:"btn-group btn-group-sm d-flex align-items-center",role:"group",children:[Object(c.jsxs)("a",{href:"#",className:"btn btn-outline-secondary",children:[Object(c.jsx)(b.a,{icon:N.c}),"\xa0",n.score]}),Object(c.jsxs)("a",{href:(t=n.id,"https://news.ycombinator.com/item?id=".concat(t)),className:"btn btn-outline-secondary",children:[Object(c.jsx)(b.a,{icon:N.b}),"\xa0",n.descendants]}),Object(c.jsx)("a",{href:"#",className:"btn btn-outline-secondary",onClick:function(){return a(n.id)},children:Object(c.jsx)(b.a,{icon:j.b})})]})]})},y=function(e){var t=e.stories,n=e.hidden,a=e.addHidden;return(n.length?t.filter((function(e){return!n.includes(e.id)})):t).map((function(e){return Object(c.jsx)(k,{story:e,addHidden:a},e.id)}))},S=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)("Day"),o=Object(d.a)(r,2),m=o[0],h=o[1],g=Object(a.useState)([]),v=Object(d.a)(g,2),w=v[0],N=v[1],k=Object(a.useState)(!1),S=Object(d.a)(k,2),C=S[0],H=S[1],z=Object(a.useState)(""),D=Object(d.a)(z,2),W=D[0],A=D[1],E=Object(a.useState)(""),L=Object(d.a)(E,2),U=L[0],I=L[1],M=Object(a.useState)(!1),T=Object(d.a)(M,2),B=T[0],J=T[1],P=Object(a.useState)(null),Y=Object(d.a)(P,2),F=Y[0],R=Y[1];Object(a.useEffect)((function(){console.log("fetching stories..."),H(!0),p(m).then((function(e){console.log("...got them"),s(e.data),H(!1)})).catch((function(e){console.log("didn't get them: ",e),H(!1)}))}),[m]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loginToken");e&&R(e)}),[]),Object(a.useEffect)((function(){F&&(console.log("fetching hidden..."),O(F).then((function(e){console.log("...got hidden"),N(e.data)})).catch((function(e){console.log("whoopsie:",e),N(null)})))}),[F]);var $=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,x.login({goto:"news",acct:W,pw:U});case 4:(n=e.sent).token?R(n.token):R(null),J(!1),A(""),I(""),window.localStorage.setItem("loginToken",n.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),J(!0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Day")},children:"Day"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Week")},children:"Week"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Month")},children:"Month"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("Year")},children:"Year"}),Object(c.jsx)("button",{className:"btn btn-light",onClick:function(){return h("All")},children:"All"})]})};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("nav",{className:"navbar fixed-top navbar-expand navbar-dark bg-dark d-flex justify-content-start align-items-center",children:[Object(c.jsxs)("div",{className:"navbar-brand h1 m-0 mr-3",children:[Object(c.jsx)(b.a,{icon:u.a,size:"lg",className:"mr-2"}),"Top Hacker News Stories"]}),Object(c.jsxs)("div",{className:"btn-group d-md-none",children:[Object(c.jsx)("button",{className:"btn btn-sm btn-light",type:"button","data-toggle":"dropdown",children:m}),Object(c.jsx)("div",{className:"dropdown-menu dropdown-menu-right",children:Object(c.jsx)("div",{className:"btn-group btn-group-sm",children:q()})})]}),Object(c.jsx)("div",{className:"btn-group btn-group-sm d-none d-md-block",children:q()}),Object(c.jsxs)("div",{className:"btn-group",children:[Object(c.jsx)("a",{className:"btn","data-toggle":"dropdown",href:"#",children:F?Object(c.jsx)(b.a,{icon:j.c,size:"lg",className:"m-auto",inverse:!0}):Object(c.jsx)(b.a,{icon:j.a,size:"lg",className:"m-auto",inverse:!0})}),Object(c.jsx)("div",{className:"dropdown-menu dropdown-menu-right",id:"loginDropdownMenu",children:F?Object(c.jsx)("div",{className:"m-3",children:"Logged in"}):Object(c.jsxs)("form",{className:"px-2",onSubmit:$,children:[Object(c.jsxs)("div",{className:"mb-3 form-group",children:["Username",Object(c.jsx)("input",{type:"text",value:W,name:"Username",onChange:function(e){var t=e.target;return A(t.value)}})]}),Object(c.jsxs)("div",{className:"mb-3 form-group",children:["Password",Object(c.jsx)("input",{type:"password",value:U,name:"Password",onChange:function(e){var t=e.target;return I(t.value)}})]}),Object(c.jsx)("button",{type:"submit",className:"btn-dark btn-md mb-2 form-group",children:"Login"}),B?Object(c.jsx)("div",{className:"mb-3 text-danger",children:"Wrong username/password"}):null,Object(c.jsx)("div",{className:"small form-group",children:Object(c.jsxs)("small",{children:["Use your Hacker News login or"," ",Object(c.jsx)("a",{href:"https://news.ycombinator.com/login",children:"register there"})]})})]})})]})]}),Object(c.jsx)("main",{children:C?Object(c.jsxs)("div",{className:"alert alert-primary align-middle m-3",role:"alert",children:["Loading... ",Object(c.jsx)("div",{className:"spinner-border",role:"status"})]}):Object(c.jsx)(y,{stories:n,hidden:w,addHidden:function(e){console.log("hiding: ",e,":",w);var t=w.concat(e);N(t),F&&f(e,F)}})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(c.jsx)(S,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.e45eaef0.chunk.js.map